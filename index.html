<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Heart with R Cutout</title>
<style>
html,body{
    margin:0;
    padding:0;
    background:#0b0b0f;
    overflow:hidden;
    font-family:Arial, sans-serif;
}
canvas{display:block}
.text{
    position:absolute;
    top:45%;
    width:100%;
    text-align:center;
    font-size:56px;
    letter-spacing:4px;
    color:#ff4d6d;
    animation:fade 4.5s ease forwards;
}
@keyframes fade{
    0%{opacity:1}
    70%{opacity:1}
    100%{opacity:0}
}
</style>
</head>
<body>

<div class="text">My <b>HEART</b> is with <b>YOU</b></div>
<canvas id="c"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

function resize(){
    c.width = innerWidth;
    c.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const cx = () => c.width/2;
const cy = () => c.height/2;
const particles = [];

class Particle{
    constructor(tx,ty){
        this.tx = tx;
        this.ty = ty;
        this.a = Math.random()*Math.PI*2;
        this.r = Math.random()*420 + 220;
        this.x = cx()+Math.cos(this.a)*this.r;
        this.y = cy()+Math.sin(this.a)*this.r;
        this.speed = Math.random()*0.0025 + 0.001;
        this.size = 1.6;
    }
    update(){
        this.a += this.speed;
        this.r *= 0.994;
        const sx = cx()+Math.cos(this.a)*this.r;
        const sy = cy()+Math.sin(this.a)*this.r;
        this.x += (this.tx-this.x)*0.06 + (sx-this.x)*0.015;
        this.y += (this.ty-this.y)*0.06 + (sy-this.y)*0.015;
    }
    draw(){
        ctx.fillStyle="#ff4d6d";
        ctx.fillRect(this.x,this.y,this.size,this.size);
    }
}

function buildMask(){
    ctx.clearRect(0,0,c.width,c.height);

    /* HEART */
    ctx.save();
    ctx.translate(cx(),cy());
    ctx.scale(17,17);
    ctx.beginPath();
    for(let t=0;t<Math.PI*2;t+=0.01){
        const x = 16*Math.pow(Math.sin(t),3);
        const y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
        ctx.lineTo(x,y);
    }
    ctx.closePath();
    ctx.fillStyle="white";
    ctx.fill();
    ctx.restore();

    /* CUT OUT R */
    ctx.globalCompositeOperation="destination-out";
    ctx.font="bold 190px Arial";
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText("R",cx(),cy()+12);
    ctx.globalCompositeOperation="source-over";

    const data = ctx.getImageData(0,0,c.width,c.height).data;
    ctx.clearRect(0,0,c.width,c.height);

    particles.length=0;
    for(let y=0;y<c.height;y+=6){
        for(let x=0;x<c.width;x+=6){
            const i=(y*c.width+x)*4;
            if(data[i+3]>150){
                particles.push(new Particle(x,y));
            }
        }
    }
}

setTimeout(buildMask,4600);

function animate(){
    ctx.clearRect(0,0,c.width,c.height);
    particles.forEach(p=>{
        p.update();
        p.draw();
    });
    requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
